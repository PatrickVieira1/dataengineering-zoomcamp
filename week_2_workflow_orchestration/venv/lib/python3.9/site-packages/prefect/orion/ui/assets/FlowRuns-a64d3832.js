import{v as z,Q as E,d as L,U as Q,V as r,c as u,X,r as Y,a as o,w as c,Y as b,Z,o as s,b as l,u as e,_ as $,i as k,$ as q,a0 as F,a1 as G,W as g,a2 as I,a3 as J,e as i,a4 as w,a5 as K,a6 as M,a7 as ee,a8 as se,a9 as C,aa as oe,ab as te,ac as ne,ad as le,ae}from"./index-7b2fa3e3-fc9295f6.js";import{u as ue}from"./usePageTitle-fb696d1b.js";import"./index-62fdc6b8.js";import{A as re}from"./ApiRoute-397f3bc7.js";import{r as ce}from"./routes-ee02d8bc.js";import"./meta-26546594.js";class ie extends re(E){}const de=z(new ie),pe={class:"flow-runs__list"},fe={class:"flow-runs__list-controls"},me={class:"flow-runs__list-controls--right"},ke=L({__name:"FlowRuns",setup(V){const S=Z(),d=Q(),R=r(d.flowRuns.getFlowRunsCount,[{}]),x=u(()=>R.executed),D=u(()=>R.response===0),{filter:p,hasFilters:A,startDate:N,endDate:U,name:f,sort:m}=X(),_={interval:3e4},y=r(d.flowRuns.getFlowRunsCount,[p],_),B=u(()=>y.response),H=r(de.getFlowRunHistory,[p],_),P=u(()=>H.response??[]),v=r(d.flowRuns.getFlowRuns,[p],_),h=u(()=>v.response??[]),t=Y([]);function O(){S.push(ce.flowRuns())}const T=()=>{t.value=[],v.refresh(),y.refresh()};return ue("Flow Runs"),(_e,n)=>{const W=b("p-button"),j=b("p-layout-default");return s(),o(j,{class:"flow-runs"},{header:c(()=>[l(e($))]),default:c(()=>[e(x)?(s(),k(F,{key:0},[e(D)?(s(),o(e(q),{key:0})):(s(),k(F,{key:1},[l(e(G)),e(g).md?(s(),o(e(I),J({key:0,history:e(P)},{startDate:e(N),endDate:e(U)},{class:"flow-runs__chart"}),null,16,["history"])):i("",!0),w("div",pe,[w("div",fe,[w("div",me,[t.value.length==0?(s(),o(e(K),{key:0,count:e(B),label:"Flow run"},null,8,["count"])):(s(),o(e(M),{key:1,count:t.value.length},null,8,["count"])),l(e(ee),{selected:t.value,onDelete:T},null,8,["selected"])]),e(g).md?(s(),o(e(se),{key:0,modelValue:e(f),"onUpdate:modelValue":n[0]||(n[0]=a=>C(f)?f.value=a:null),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):i("",!0),l(e(oe),{modelValue:e(m),"onUpdate:modelValue":n[1]||(n[1]=a=>C(m)?m.value=a:null)},null,8,["modelValue"])]),l(e(te),{selected:t.value,"onUpdate:selected":n[2]||(n[2]=a=>t.value=a),"flow-runs":e(h)},null,8,["selected","flow-runs"]),e(h).length?i("",!0):(s(),o(e(ne),{key:0},le({_:2},[e(A)?{name:"actions",fn:c(()=>[l(W,{size:"sm",secondary:"",onClick:O},{default:c(()=>[ae(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):i("",!0)]),_:1})}}});export{ke as default};
